<div class="row">
    <div class="col-10 col-lg-8 mx-auto">

        <mat-spinner style="margin:0 auto;" *ngIf="loading"></mat-spinner>
        <div class="show-profile" *ngIf="!searching">
            <div class="profilePic mt-3" *ngIf="profile?.imageUrl">
                <img [src]="profile?.imageUrl">
            </div>
            <div id="zero"><p>Nom d'utilisateur : <span>{{profile?.userName}}</span></p></div>
            <div id="first">
                <p>Pr√©nom : <span>{{profile?.firstname}}</span></p>
                <p>Nom : <span>{{profile?.lastname}}</span></p>
            </div>
            <div id="second">
                <p>Service : <span>{{profile?.serviceName}}</span></p>
                <p *ngIf="email">e-mail : <span>{{profile?.email}}</span></p>
            </div>        
            <div id="aboutMe" *ngIf="aboutMe">
                <p>A propos de moi : </p>
                <p><span>{{aboutMe}}</span></p>
            </div>
        </div>
        
        <div class="row controls">
            <div class="row col-xs-12 col-sm-6 mx-auto">
                <div class="col-6 mx-auto my-1 text-center">
                    <button *ngIf="!searching" routerLink="/publications"><img src="./assets/images/list-icon.png"></button>
                </div>
                <div class="col-6 mx-auto my-1 text-center">
                    <button *ngIf="!searching" (click)="onGetList()"><img src="./assets/images/search-icon.png"></button>
                </div>
            </div>
            <div class="row col-12 col-sm-6 mx-auto">
                <div class="col-12 col-sm-5 mx-auto my-1 text-center">
                    <button *ngIf="isMine && !searching" routerLink="modify"><img src="./assets/images/write-icon.png"></button>
                </div>
                <div class="col-12 col-sm-5 mx-auto my-1 text-center">
                    <button *ngIf="isMine && !searching" routerLink="settings"><img src="./assets/images/settings-icon.png"></button>
                </div>                
            </div>
        </div>
        <div class="back-to-post row">
            <button class="col-10 mx-auto text-center" *ngIf="!fromList && !searching && !fromUsersList && !isMine" routerLink="/publications/{{fromPost}}">Retour publication</button>
        </div>
        <br/>
        <br/>

        <div *ngIf="!searching">
            <h2 class="text-center" *ngIf="publications?.length">Publications</h2>
            <ul class="list-group">
                <app-user-publications  *ngFor="let publication of publications; let i = index"
                    [publicationTitle]="publication.title"
                    [publicationContent]="publication.content"
                    [publicationDate]="publication.date_publication"
                    [publicationLikes]="publication.likes"
                    [publicationNumberComments]="publication.numberComments"
                    [publicationUserName]="publication.userName"
                    [publicationModerated]="publication.moderated"
                    [fromProfile]="fromProfile"
                    [index]="i" 
                    [id]="publication.id">
                </app-user-publications>
            </ul>
        </div>
        
        <div class="search row no-gutters mx-0" *ngIf="searching">
            <div class="text-center col-6 col-sm-2 order-2 order-sm-1">
                <button class="mx-auto" (click)="onBackFromList()"><img src="./assets/images/back-icon.png"></button>
            </div>
            <h2 class="text-center align-self-center col-12 col-sm-8 mb-2 mx-auto order-1 order-sm-2">Liste des utilisateurs</h2>
            <div class="text-center col-6 col-sm-2 order-3">
                <button (click)="onResearch()"><img src="./assets/images/search-icon.png"></button>
            </div>
        </div>
        <br/>
        <br/>
        <div class="users-list" *ngIf="searching">
            <div id="search-tool" *ngIf="research">
                <label for="search-window" *ngIf="!noUser">Entrer un nom d'utilisateur</label>
                <p class="noUser mx-auto" *ngIf="noUser">{{noUser}}</p>
                <div class="row align-items-center ">                                                
                    <input id="search-window" class="col-7 mx-auto" #inputUserName name="search">
                    <button mat-raised-button class="mx-auto align-items-center col-4" type="submit" (click)="onSearch(inputUserName.value)">Rechercher</button>
                </div>
            </div>          
            <ul class="list-group mt-4">        
                <app-users-list *ngFor="let shortProfile of shortProfiles; let j = index"
                    [userName]="shortProfile.userName"
                    [firstname]="shortProfile.firstname"
                    [lastname]="shortProfile.lastname"
                    [serviceName]="shortProfile.serviceName"
                    [imageUrl]="shortProfile.imageUrl">
                </app-users-list>
            </ul>
        </div>
    </div>
</div>
